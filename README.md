# zwreec [![Build Status](https://travis-ci.org/Drakulix/zwreec.svg?branch=master)](https://travis-ci.org/Drakulix/zwreec)

<img width=144px src="https://dl.dropboxusercontent.com/u/70410095/zwreec/logo.png">
*Logo by [@madmalik](https://github.com/madmalik)*

Zwreec is a compiler for [interactive fiction](http://en.wikipedia.org/wiki/Interactive_fiction) in the Twee format (created by the [Twine software](http://en.wikipedia.org/wiki/Twine_(software))) to [Z-Machine](http://en.wikipedia.org/wiki/Z-machine) instructions (Zcode) which can be run with interpreters like [frotz](http://frotz.sourceforge.net).

## Requirements and Usage

The library uses a [fork of rustlex](https://github.com/Farthen/rustlex) to to do lexical analysis. Since rustlex requires the Rust Nightly Builds, so does zwreec. More precisely, this library was *only* developed and tested against Rust 1.2.0-nightly, build 2015-06-01. You can install this specific version using:

```sh
$ curl -s https://static.rust-lang.org/rustup.sh | sh -s -- --channel=nightly --date=2015-06-02
```

### Using the library 

To use zwreec in your project you can add it as a dependency to your `Cargo.toml`.

```toml
[dependencies.zwreec]
git = "https:://github.com/Drakulix/zwreec"
```

Then you can use it in your crate root.

```rust
extern crate zwreec;
```

### Reference Binary Implementation

Zwreecs [Github-Repository](https://github.com/Drakulix/zwreec) contains a 
reference binary implementation that uses this library and provides a simple 
command line interface to compile Twee files.

To build the binary, you need the rust version as outlined in [Requirements and
Usage](#requirements-and-usage). Then you can build the binary using

```sh
$ cargo build
```

The resulting binary can be found at `target/debug/zwreec`. 

#### Usage

```
Usage: zwreec [-hV] [-vq] [-l [LOGFILE]] [-o OUTPUT] INPUT

Options:
    -v --verbose        be more verbose. Can be used multiple times.
    -q --quiet          be quiet
    -l --logfile [LOGFILE]
                        specify log file (default zwreec.log)
    -o FILE             name of the output file
    -f --force          force opening of output file
    -h --help           display this help and exit
    -V --version        display version


Additional help:
    --help -v           Print the full set of options zwreec accepts
```

#### Compiling a sample Twee file:

This repository contains a few sample Twee-Files used for the library's integration tests. They are located under `tests/integration/should-compile/`. To compile them you can use the following command:

```
$ ./target/debug/zwreec -o ASCII.z8 ./tests/integration/should-compile/ASCII.twee
```

_Edit the above line to compile different twee adventures._

Then you can run `./ASCII.z8` with your favorite Z-Code interpreter, like [frotz](http://frotz.sourceforge.net).


## Development and Documentation

Zwreec was developed by students as part of the course "Softwareprojekt Ãœbersetzerbau" in 2015. 

You can find the extensive autogenerated documentation of Zwreec and its dependencies under [drakulix.github.io/zwreec/](https://drakulix.github.io/zwreec/).
