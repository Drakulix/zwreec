# zwreec [![Build Status](https://travis-ci.org/Drakulix/zwreec.svg?branch=master)](https://travis-ci.org/Drakulix/zwreec)

<img width=144px src="https://dl.dropboxusercontent.com/u/70410095/zwreec/logo.png">
*Logo by [@madmalik](https://github.com/madmalik)*

Zwreec is a compiler for [interactive fiction](http://en.wikipedia.org/wiki/Interactive_fiction) in the Twee format (created by the [Twine software](http://en.wikipedia.org/wiki/Twine_(software))) to [Z-Machine](http://en.wikipedia.org/wiki/Z-machine) instructions (Zcode) which can be run with interpreters like [frotz](http://frotz.sourceforge.net) or [gargoyle](http://ccxvii.net/gargoyle/).

## Requirements and Usage

The library uses a [fork of rustlex](https://github.com/Drakulix/rustlex) to to do lexical analysis.

You can install Rust stable or nightly as you like via the [provided binaries](http://www.rust-lang.org/install.html) or the rustup script:

```sh
$ curl -s https://static.rust-lang.org/rustup.sh | sh -s
```

Or install the Ubuntu/Debian Packages for [Rust](http://ppa.launchpad.net/hansjorg/rust/ubuntu/pool/main/r/rust-nightly/) and [Cargo](http://ppa.launchpad.net/hansjorg/rust/ubuntu/pool/main/c/cargo-nightly/).

### Using the library 

To use zwreec in your project you can add it as a dependency to your `Cargo.toml`.

```toml
[dependencies.zwreec]
git = "https:://github.com/Drakulix/zwreec"
```

Then you can use it in your crate root.

```rust
extern crate zwreec;
```

### Reference Binary Implementation

Zwreecs [Github-Repository](https://github.com/Drakulix/zwreec) contains a 
reference binary implementation that uses this library and provides a simple 
command line interface to compile Twee files.

To build the binary, you need the rust version as outlined in [Requirements and
Usage](#requirements-and-usage). Then you can build the binary using

```sh
$ cargo build
```

The resulting binary can be found at `target/debug/zwreec` or downloaded at [https://github.com/Drakulix/zwreec/releases/tag/v0.4.0](). 

#### Usage

```
Usage: zwreec [-hV] [-vq] [-l [LOGFILE]] [-o OUTPUT] INPUT

Options:
    -v --verbose        be more verbose. Can be used multiple times.
    -q --quiet          be quiet
    -l --logfile [LOGFILE]
                        specify log file (default zwreec.log)
    -o FILE             name of the output file
    -f --force          force opening of output file
    -h --help           display this help and exit
    -V --version        display version


Additional help:
    --help -v           Print the full set of options zwreec accepts
```

#### Compiling a sample Twee file:

This repository contains a few sample Twee-Files used for the library's integration tests. They are located under `tests/integration/should-compile/`. To compile them you can use the following command:

```
$ ./target/debug/zwreec -o CurrentStatus.z8 ./tests/integration/should-compile/CurrentStatus.twee
```

_Edit the above line to compile different twee adventures._

Then you can run `./CurrentStatus.z8` with your favorite Z-Code interpreter.


## Development and Documentation

Zwreec was developed by students as part of the course "Softwareprojekt Ãœbersetzerbau" in 2015. 

You can find the extensive autogenerated documentation of Zwreec and its dependencies under [drakulix.github.io/zwreec/](https://drakulix.github.io/zwreec/).
